<!DOCTYPE html>
<html>
<head>
    <title>BLAKE3 Local Test</title>
</head>
<body>
    <h1>BLAKE3 Library Test</h1>
    <p id="status">Loading...</p>

    <script type="module">
        import init, { create_hasher } from './lib/blake3_js.js';

        try {
            // Initialize WASM
            await init('./lib/blake3_js_bg.wasm');

            // Test hashing
            const hasher = create_hasher();
            const testData = new TextEncoder().encode('Hello, BLAKE3!');
            hasher.update(testData);

            const out = new Uint8Array(32);
            hasher.digest(out);

            const hex = Array.from(out)
                .map(b => b.toString(16).padStart(2, '0'))
                .join('');

            document.getElementById('status').innerHTML =
                `✅ BLAKE3 loaded successfully!<br>` +
                `Test hash: <code>${hex}</code>`;
        } catch (error) {
            document.getElementById('status').innerHTML =
                `❌ Error: ${error.message}`;
        }
    </script>
</body>
</html>
